generator client {
    provider = "prisma-client-js"
    output   = "../src/generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// Модель пользователя Telegram
model TelegramUser {
    id         Int      @id @default(autoincrement())
    telegramId BigInt   @unique @map("telegram_id")
    username   String?
    firstName  String?  @map("first_name")
    lastName   String?  @map("last_name")
    createdAt  DateTime @default(now()) @map("created_at")
    updatedAt  DateTime @updatedAt @map("updated_at")

    files File[] @relation("TelegramUserFiles")

    @@map("telegram_users")
}

// Модель файла
model File {
    id          Int      @id @default(autoincrement())
    key         String   @unique
    filename    String
    contentType String   @map("content_type")
    size        Int?
    createdAt   DateTime @default(now()) @map("created_at")
    updatedAt   DateTime @updatedAt @map("updated_at")

    userId         Int? @map("user_id")
    telegramUserId Int? @map("telegram_user_id")

    telegramUser TelegramUser? @relation("TelegramUserFiles", fields: [telegramUserId], references: [id])

    @@map("files")
}
