generator client {
    provider = "prisma-client-js"
    output   = "../src/generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// Модель пользователя Telegram
model TelegramUser {
    id         Int      @id @default(autoincrement())
    telegramId BigInt   @unique @map("telegram_id")
    createdAt  DateTime @default(now()) @map("created_at")
    updatedAt  DateTime @updatedAt @map("updated_at")

    @@map("telegram_users")
}

// Модель выпуска (релиза)
model Release {
    id          Int      @id @default(autoincrement())
    name        String
    createdAt   DateTime @default(now()) @map("created_at")
    updatedAt   DateTime @updatedAt @map("updated_at")

    // Информация о логотипе
    logoKey         String? @map("logo_key")
    logoFilename    String? @map("logo_filename")
    logoContentType String? @map("logo_content_type")

    // Связь с игроками
    players Player[]

    @@map("releases")
}

// Модель игрока
model Player {
    id          Int      @id @default(autoincrement())
    name        String
    createdAt   DateTime @default(now()) @map("created_at")
    updatedAt   DateTime @updatedAt @map("updated_at")

    // Связь с выпуском
    releaseId Int     @map("release_id")
    release   Release @relation(fields: [releaseId], references: [id])

    // Информация о фотографии
    photoKey         String? @map("photo_key")
    photoFilename    String? @map("photo_filename")
    photoContentType String? @map("photo_content_type")

    @@map("players")
}
