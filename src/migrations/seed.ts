import prisma from '../database/prisma';

/**
 * Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
 */
async function main() {
	console.log('ðŸŒ± ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…...');

	// ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼
	await prisma.file.deleteMany({});
	await prisma.telegramUser.deleteMany({});

	console.log('Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ñ‹');

	// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Telegram
	const telegramUser1 = await prisma.telegramUser.create({
		data: {
			telegramId: BigInt(123456789),
			username: 'test_user1',
			firstName: 'Test',
			lastName: 'User',
		},
	});

	const telegramUser2 = await prisma.telegramUser.create({
		data: {
			telegramId: BigInt(987654321),
			username: 'test_user2',
			firstName: 'Demo',
			lastName: 'Account',
		},
	});

	console.log(`ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾ ${2} Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Telegram`);

	console.log('âœ… Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾!');
}

main()
	.catch((e) => {
		console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…:', e);
		process.exit(1);
	})
	.finally(async () => {
		await prisma.$disconnect();
	});
